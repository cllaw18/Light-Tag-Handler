function remove_lth_tag(e){var t=e.id;var n=e.id.match(/\d+$/)[0];var r=e.parentNode.parentNode.parentNode;var i=e.parentNode.parentNode;var s=e.parentNode;var o=r.firstChild;var u=o.value;var a=r.lastChild.lastChild;var f=r.lastChild.lastChild.previousSibling;var l=parseInt(a.innerHTML);var c=parseInt(f.innerHTML);var h="";var p=l-c-1;var d=l-1;var v=c+1;f.innerHTML=v;ulChildren=s.children;e.parentNode.removeChild(e);for(var m=0;m<p;m++){j=p-1;if(m!=j){h+=ulChildren[m].innerHTML+","}if(m==j){h+=ulChildren[m].innerHTML}}o.value=h}jQuery(document).ready(function(){var e=" data:application/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJJJREFUeNpiZACCnp7e+UDKAIgdS0qKPzBAAVBcAEjtB+ILQPFERqjCBKj8BZgGJIUGULkFTEgcBih7P1ChAppCsBxIsSPURGQN99EUgm1kRHMbsgIGdKcxInlGAWoiOlAEKnwAYjAhmbyeATtYD5VnYCTgBBSnMGFRCJJQxOLp/UxogjDPPMASShcYSYlBgAADABQgQdJ6ze4GAAAAAElFTkSuQmCC";var t='style="float:left; background:#eee; margin:2px; padding:0 5px; -webkit-border-radius: 5px; -moz-border-radius: 5px; border-radius:5px; cursor: url('+e+'), pointer;"';var n='<li class="input"><input type="text" class="lth_input"></li>';var r='<span class="lth_removed">0</span><span class="lth_counter">0</span>';var i='<div class="lth_show"><ul>'+n+"</ul>"+r+"</div>";jQuery(".lth_group").append(i);jQuery(".lth_show *").css({margin:"0",padding:"0",border:"0",display:"inline-block"});jQuery(".lth_show").css({border:"1px solid #ccc",background:"#fff",width:"100%"});jQuery(".lth_show ul").css({"list-style-type":"none"});jQuery(".lth_show ul li.input").css({"float":"left",background:"#fff",margin:"2px",padding:"2px 5px;"});jQuery(".lth_show ul li.tag").css({cursor:"help"});jQuery(".lth_show .lth_counter, .lth_show .lth_removed").css({display:"none"});jQuery(".lth_hidden").css({"float":"left",width:"0",height:"0",margin:"0",border:"0"});jQuery(".lth_hidden").each(function(e,n){var r=$(this).html("1").val();if(r!=""){var i="";var s=jQuery(this).html("1").parent().find(".lth_counter");var o=jQuery(this).html("1").parent().find("ul");var u=r.split(",");var a=u.length;for(var f=0;f<a;f++){i+='<li id="lth_'+f+'" class="tag" onclick="remove_lth_tag(this)" '+t+">"+u[f]+"</li>"}o.prepend(i);s.text(a)}});jQuery(".lth_input").on("input propertychange paste",function(){var e=jQuery(this).val().trim();if(e.substr(e.length-1)==","){var n=jQuery(this).parent().parent().parent().parent().find('input[type="text"]').filter(":visible:first");var r=jQuery(this).parent().parent().parent().parent().find("ul");var i=jQuery(this).parent().parent().parent().parent().find(".lth_counter");var s=i.text();var o="";e=e.slice(0,-1).trim();if(e!=""){if(n.val()!=""){o=n.val()+","+e}else{o=n.val()+e}jQuery('<li id="lth_'+s+'" class="tag" onclick="remove_lth_tag(this)" '+t+">"+e+"</li>").insertBefore(jQuery(this).parent());n.val(o);s++;i.text(s)}this.value=""}})})
