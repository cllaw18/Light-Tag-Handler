function rm_lth_tag(e){var t=e.id;var n=e.id.match(/\d+$/)[0];vargp_lv=e.parentNode.parentNode.parentNode;varshow_lv=e.parentNode.parentNode;var r=e.parentNode;var i=gp_lv.firstChild;var s=gp_lv.lastChild.lastChild;var o=gp_lv.lastChild.lastChild.previousSibling;var u=parseInt(s.innerHTML);var a=parseInt(o.innerHTML);var f="";var l=u-c_rmd-1;var c=u-1;var h=a+1;removed_lv.innerHTML=h;ulChildren=r.children;e.parentNode.removeChild(e);for(var p=0;p<l;p++){j=l-1;if(p!=j){f+=ulChildren[p].innerHTML+","}if(p==j){f+=ulChildren[p].innerHTML}}i.value=f}var tbg_c="#eee";var t_mar="7px 3px 0 3px";var t_pad="0 5px";var t_radius="5px";var th_bg_c="#fff";var th_border="1px solid #ccc";var th_width="100%";var th_mar="5px 2px 0 2px";var th_pad="2px 5px";var icon=" data:application/octet-stream;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJJJREFUeNpiZACCnp7e+UDKAIgdS0qKPzBAAVBcAEjtB+ILQPFERqjCBKj8BZgGJIUGULkFTEgcBih7P1ChAppCsBxIsSPURGQN99EUgm1kRHMbsgIGdKcxInlGAWoiOlAEKnwAYjAhmbyeATtYD5VnYCTgBBSnMGFRCJJQxOLp/UxogjDPPMASShcYSYlBgAADABQgQdJ6ze4GAAAAAElFTkSuQmCC";jQuery(document).ready(function(){var e='style="float:left; background:'+tbg_c+"; margin:"+t_mar+"; padding:"+t_pad+"; -webkit-border-radius:"+t_radius+"; -moz-border-radius:"+t_radius+"; border-radius:"+t_radius+"; cursor: url("+icon+'), pointer;"';var t='<li class="input"><input type="text" class="lth_input"></li>';var n='<span class="lth_removed">0</span><span class="lth_counter">0</span>';var r='<div class="lth_show"><ul>'+t+"</ul>"+n+"</div>";jQuery(".lth_group").append(r);jQuery(".lth_show *").css({margin:"0",padding:"0",border:"0",display:"inline-block"});jQuery(".lth_show").css({border:th_border,background:th_bg_c,width:th_width});jQuery(".lth_show ul").css({"list-style-type":"none",background:th_bg_c});jQuery(".lth_show ul li.input").css({"float":"left",background:th_bg_c,margin:th_mar,padding:th_pad});jQuery(".lth_counter,.lth_removed").css({display:"none"});jQuery(".lth_hidden").css({"float":"left",width:"0",height:"0",margin:"0",border:"0"});jQuery(".lth_hidden").each(function(t,n){var r=$(this).html("1").val();if(r!=""){var i="";var s=jQuery(this).html("1").parent().find(".lth_counter");var o=jQuery(this).html("1").parent().find("ul");var u=r.split(",");var a=u.length;for(var f=0;f<a;f++){i+='<li id="lth_'+f+'" onclick="rm_lth_tag(this)" '+e+">"+u[f]+"</li>"}o.prepend(i);s.text(a)}});jQuery(".lth_input").on("input propertychange paste",function(){var t=jQuery(this).val().trim();if(t.substr(t.length-1)==","){var n=jQuery(this).parent().parent().parent().parent();var r=n.find('input[type="text"]').filter(":visible:first");var i=n.find("ul");var s=n.find(".lth_counter");var o=s.text();var u="";t=t.slice(0,-1).trim();if(t!=""){if(r.val()!=""){u=r.val()+","+t}else{u=r.val()+t}jQuery('<li id="lth_'+o+'" onclick="rm_lth_tag(this)" '+e+">"+t+"</li>").insertBefore(jQuery(this).parent());r.val(u);o++;s.text(o)}this.value=""}})})
